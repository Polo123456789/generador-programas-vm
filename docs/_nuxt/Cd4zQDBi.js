import{_ as B,c as E,o as N,A as I,r as H,B as L}from"#entry";const k={},x={class:"px-4 py-2 bg-black text-white rounded hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed"};function O(s,r){return N(),E("button",x,[I(s.$slots,"default")])}const $=Object.assign(B(k,[["render",O]]),{__name:"Button"});function T(){return Math.random().toString(36).substring(2,15)}function _(s,r){const d=H(r);{const u=window.localStorage.getItem(s);if(u)try{d.value=JSON.parse(u)}catch(i){console.error(`Error al parsear el valor del localStorage para la clave "${s}"`,i)}L(d,i=>{try{window.localStorage.setItem(s,JSON.stringify(i))}catch(f){console.error(`Error al guardar el valor en el localStorage para la clave "${s}"`,f)}},{deep:!0})}return d}const Y="students",j="assignmentHistory",C={enero:0,febrero:1,marzo:2,abril:3,mayo:4,junio:5,julio:6,agosto:7,septiembre:8,octubre:9,noviembre:10,diciembre:11};function m(s){const r=s.toLowerCase().match(/(\d+)-\d+\s+de\s+(\w+)/);if(!r||!r[1]||!r[2])return 0;const d=parseInt(r[1]),u=r[2].toLowerCase(),i=C[u];if(i===void 0)return 0;const f=new Date().getFullYear();return new Date(f,i,d).getTime()}let A=null,p=null;function G(){A||(A=_(Y,[])),p||(p=_(j,[]))}function z(){G();const s=A,r=p;function d(t,a){const o={id:T(),name:t.trim(),gender:a,hidden:!1};return s.value.push(o),o}function u(t){const a=s.value.find(o=>o.id===t);a&&(a.hidden=!a.hidden)}function i(t,a){const o=r.value.filter(e=>(e.studentId===t||e.companionId===t)&&e.assignmentType===a).sort((e,c)=>c.createdAt-e.createdAt);return o.length>0?o[0]?.weekDate??null:null}function f(t,a){const o=r.value.filter(e=>e.studentId===t&&e.companionId===a||e.studentId===a&&e.companionId===t).sort((e,c)=>c.createdAt-e.createdAt);return o.length>0?o[0]?.weekDate??null:null}function v(t,a){return s.value.filter(e=>!e.hidden).map(e=>({...e,lastAssignmentDate:i(e.id,t)})).sort((e,c)=>{if(!e.lastAssignmentDate&&!c.lastAssignmentDate)return 0;if(!e.lastAssignmentDate)return-1;if(!c.lastAssignmentDate)return 1;const D=m(e.lastAssignmentDate),n=m(c.lastAssignmentDate);return D-n})}function w(t,a,o){const e=s.value.find(n=>n.id===t);if(!e)return[];const c=e.gender;return s.value.filter(n=>!n.hidden&&n.id!==t&&n.gender===c).map(n=>({...n,lastTimeTogether:f(t,n.id),lastAssignmentDate:i(n.id,o)})).sort((n,g)=>{let l=0;if(!n.lastTimeTogether&&!g.lastTimeTogether)l=0;else if(!n.lastTimeTogether)l=-1;else if(!g.lastTimeTogether)l=1;else{const S=m(n.lastTimeTogether),h=m(g.lastTimeTogether);l=S-h}if(l===0)if(!n.lastAssignmentDate&&!g.lastAssignmentDate)l=0;else if(!n.lastAssignmentDate)l=-1;else if(!g.lastAssignmentDate)l=1;else{const S=m(n.lastAssignmentDate),h=m(g.lastAssignmentDate);l=S-h}return l})}function b(t){const a={...t,id:T(),createdAt:Date.now()};r.value.push(a)}function y(t){return s.value.find(o=>o.id===t)?.name||""}return{students:s,assignmentHistory:r,addStudent:d,toggleStudentHidden:u,getStudentsSortedByLastAssignment:v,getCompanionsSorted:w,assignStudent:b,getStudentName:y,getLastAssignmentDate:i}}export{$ as _,_ as a,z as u};
